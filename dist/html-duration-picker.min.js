!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.HtmlDurationPicker=e():t.HtmlDurationPicker=e()}(this,(()=>(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>r});
/**
 * @preserve
 * html-duration-picker.js
 *
 * @description Turn an html input box to a duration picker, without jQuery
 * @version custom
 * @author Chif <nadchif@gmail.com>
 * @author addwyn.lelann <addwyn.lelann@s3pweb.com>
 * @license Apache-2.0
 *
 */const r=function(){window.NodeList&&!window.NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var t=".html-duration-picker-input-controls-wrapper .html-duration-picker {  text-align: right;  padding-right: 20px;  box-sizing: border-box;  width: 100%;  margin: 0;  cursor: text;}.html-duration-picker-input-controls-wrapper .scroll-btn {  text-align: center;  width: 16px;  padding: 0 4px;  border: none;  cursor: default;}.html-duration-picker-input-controls-wrapper .caret {  width: 0;  height: 0;  border-style: solid;}.html-duration-picker-input-controls-wrapper .caret.caret-up {  border-width: 0 4px 5px 4px;  border-color: transparent transparent #000 transparent;}.html-duration-picker-input-controls-wrapper .caret.caret-down {  border-width: 5px 4px 0 4px;  border-color: #000 transparent transparent transparent;}.html-duration-picker-input-controls-wrapper .controls {  display: flex;  flex-direction: column;  position: absolute;  width: 16px;  z-index: 1;  top: 50%;  transform: translateY(-50%);  right: 4px;}.html-duration-picker-input-controls-wrapper {  display: inline-block;  position: relative;  background: transparent;  padding: 0;  box-sizing: border-box;}",e=function(t,e){var r,n=t.target,a=n.selectionStart,i=n.selectionEnd,o=n.value,u=o.indexOf(":"),s=o.lastIndexOf(":");return a<=u?r="hours":e||a<=s?r="minutes":!e&&a>s&&(r="seconds"),{cursorSelection:r,hideSeconds:e,hourMarker:u,minuteMarker:s,content:o.slice(a,i)}},r=function(t,e){t.setAttribute("data-adjustment-factor",e)},n=function(t){var e=t.target,r=k(e).maxDuration,n=Math.floor(r/3600),a=n<1?0:n.toString().length;(0===t.target.selectionEnd&&0===t.target.selectionStart||t.target.selectionEnd-t.target.selectionStart>a||0===a)&&setTimeout((function(){e.focus(),e.select(),s(e,3600)}),1)},a=function(t){var n=t.target,a=i(n),o=e(t,a),u=o.cursorSelection,s=o.hourMarker,l=o.minuteMarker;if(u){var c=a?3:0;switch(u){case"hours":return r(n,3600),void t.target.setSelectionRange(0,s);case"minutes":return r(n,60),void t.target.setSelectionRange(s+1,l+c);default:return r(n,1),void t.target.setSelectionRange(l+1,l+3)}}},i=function(t){return void 0!==t.dataset.hideSeconds&&"false"!==t.dataset.hideSeconds},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1},r=document.createEvent("Event");return r.initEvent(t,e.bubbles,e.cancelable),r},u=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=i(t),u=g(e,a,t),l=t.value;t.value=u,!1!==r&&(l!=u&&t.dispatchEvent(o("change",{bubbles:!0,cancelable:!0})),t.dispatchEvent(o("input"))),t.setAttribute("data-adjustment-factor",n),s(t,n)},s=function(t,e){var r=t.value.indexOf(":"),n=t.value.lastIndexOf(":"),a=i(t),o=t.value.split(":");e>=3600?(t.selectionStart=0,t.selectionEnd=r):!a&&e<60?(t.selectionStart=n+1,t.selectionEnd=n+1+o[2].length):(t.selectionStart=r+1,t.selectionEnd=r+1+o[1].length,e=60),e>=1&&e<=3600&&t.setAttribute("data-adjustment-factor",e)},l=function(t){var e=1;return Number(t.getAttribute("data-adjustment-factor"))>0&&(e=Number(t.getAttribute("data-adjustment-factor"))),e},c=function(t,e){var r=l(t),n=h(t.value);switch(e){case"up":n+=r;break;case"down":(n-=r)<0&&(n=0)}var a=f(t,n);u(t,a,!0,r)},d=function(t,e){var r=l(t);switch(e){case"left":s(t,r<3600?60*r:3600);break;case"right":s(t,r>60?r/60:1)}},p=function(t,e,r){var n;return n=!1===r?e?"^[0-9]{1,9}:(([0-5][0-9]|[0-5]))$":"^[0-9]{1,9}:(([0-5][0-9]|[0-5])):(([0-5][0-9]|[0-5]))$":e?"^[0-9]{1,9}:[0-5][0-9]$":"^[0-9]{1,9}:[0-5][0-9]:[0-5][0-9]$",RegExp(n).test(t)},f=function(t,e){var r=k(t),n=r.maxDuration,a=r.minDuration;return Math.min(Math.max(e,a),n)},g=function(t,e,r){var n=t,a=Math.floor(n/3600);n%=3600;var i=Math.floor(n/60),o=n%60,u=String(a).padStart(2,"0");if(null!=r){var s=k(r).maxDuration;u=String(a).padStart(s>36e3?2:1,"0")}var l=String(i).padStart(2,"0"),c=String(o).padStart(2,"0");return e?"".concat(u,":").concat(l):"".concat(u,":").concat(l,":").concat(c)},h=function(t){if(!/:/.test(t))return 0;var e=t.split(":");return e.length<2?0:Number(e[2]?e[2]>59?59:e[2]:0)+Number(60*(e[1]>59?59:e[1]))+Number(60*e[0]*60)},v=function(t,e,r){var n,a=t.split(":");if(a.length<2)return e?"00:00":"00:00:00";if(e){if(!e&&2!==a.length)return"00:00";if(isNaN(a[0])&&(a[0]="00",n=!0),(isNaN(a[1])||a[1]<0)&&(a[1]="00",n=!0),(a[1]>59||a[1].length>2)&&(a[1]="59",n=!0),n)return a.join(":")}else{if(!e&&3!==a.length)return"00:00:00";if(isNaN(a[0])&&(a[0]="00",n=!0),(isNaN(a[1])||a[1]<0)&&(a[1]="00",n=!0),(a[1]>59||a[1].length>2)&&(a[1]="59",n=!0),(isNaN(a[2])||a[2]<0)&&(a[2]="00",n=!0),(a[2]>59||a[2].length>2)&&(a[2]="59",n=!0),n)return a.join(":")}return!1},b=function(t){var e=i(t.target),r=v(t.target.value,e);if(!1===r){var n=f(t.target,h(t.target.value));t.target.value!=g(n,e,t.target)&&(t.target.value=g(n,e,t.target))}else{var a=f(t.target,h(r));t.target.value=g(a)}},m=function(t){var r=t.target,n=r.value.split(":"),a=i(r),o=e(t,a).cursorSelection;if(n.length<2){var l=f(r,A(r));u(r,l,!1)}else{var c=k(r).maxDuration,p=Math.floor(c/3600),g=p<1?0:p.toString().length;if(a){var b=v(t.target.value,!0);if(!1!==b){var m=f(t.target,h(b));u(t.target,m,!1)}(g<1&&"hours"===o||n[0].length>=g&&"hours"===o)&&(g<1&&(n[0]="00"),d(r,"right")),n[1].length>=2&&"minutes"===o&&s(r,60)}else{var w=v(t.target.value,!1);if(!1!==w){var x=f(t.target,h(w));u(t.target,x,!1)}(g<1&&"hours"===o||n[0].length>=g&&"hours"===o)&&(g<1&&(n[0]="00"),d(r,"right")),n[1].length>=2&&"minutes"===o&&d(r,"right"),n[2].length>=2&&"seconds"===o&&s(r,1)}}},w=function(t){var e=t.target,r=e.value||e.dataset.duration,n=h(r);u(e,f(e,n))},x=function(t){var r=l(t.target);if(["ArrowDown","ArrowUp","ArrowLeft","ArrowRight","Enter"].includes(t.key)){switch(t.key){case"ArrowDown":c(t.target,"down"),s(t.target,r);break;case"ArrowUp":c(t.target,"up"),s(t.target,r);break;case"ArrowLeft":d(t.target,"left");break;case"ArrowRight":d(t.target,"right");break;case"Enter":w(t),t.target.blur()}t.preventDefault()}if("Tab"===t.key){var n=l(t.target),a=i(t.target)?60:1,o=t.shiftKey?"left":"right";("left"===o&&n<3600||"right"===o&&n>a)&&(t.preventDefault(),d(t.target,o))}if(isNaN(t.key)&&!["Backspace","ArrowDown","ArrowUp","Tab"].includes(t.key))return t.preventDefault(),!1;var u=t.target,p=i(u),f=e(t,p),g=f.cursorSelection,h=f.content,v=t.target.value.split(":"),b=k(u).maxDuration,m=Math.floor(b/3600),x=m<1?0:m.toString().length;"hours"===g&&t.key>m&&t.preventDefault(),"hours"===g&&h.length>=x||v[0].length<x?h.length>x&&x>0&&t.preventDefault():"minutes"===g&&2===h.length||v[1].length<2||"seconds"===g&&2===h.length||v[2].length<2?h.length>=2&&["6","7","8","9"].includes(t.key)&&t.preventDefault():t.preventDefault()},y=function(t,e,r){var n=t.dataset[e];return n&&p(n,i(t))?h(n):r},E=function(t){return t.preventDefault()},k=function(t){return{minDuration:y(t,"durationMin",0),maxDuration:y(t,"durationMax",359999)}},A=function(t){var e=y(t,"duration",0),r=h(e);return f(t,r)},S=function(e){if(e){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");r.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}return document.querySelectorAll("input.html-duration-picker").forEach((function(t){if("true"!=t.getAttribute("data-upgraded")){t.setAttribute("data-upgraded",!0),t.setAttribute("data-adjustment-factor",3600);var e=i(t);t.setAttribute("pattern",e?"^[0-9]{1,9}:[0-5][0-9]$":"^[0-9]{1,9}:[0-5][0-9]:[0-5][0-9]$"),t.value&&p(t.value,i(t))||u(t,A(t)),t.setAttribute("aria-label","Duration Picker"),t.addEventListener("keydown",x),t.addEventListener("focus",n),t.addEventListener("mouseup",a),t.addEventListener("change",w),t.addEventListener("input",m),t.addEventListener("blur",b),t.addEventListener("drop",E);var r=document.createElement("button"),o=document.createElement("button"),d=[r,o];r.setAttribute("class","scroll-btn"),o.setAttribute("class","scroll-btn"),r.setAttribute("type","button"),o.setAttribute("type","button"),r.setAttribute("aria-label","Increase duration"),o.setAttribute("aria-label","Decrease duration"),r.setAttribute("style","height:".concat(t.offsetHeight/2-1,"px !important;")),o.setAttribute("style","height:".concat(t.offsetHeight/2-1,"px !important;"));var f=document.createElement("div"),g=document.createElement("div");f.setAttribute("class","caret caret-up"),g.setAttribute("class","caret caret-down "),o.appendChild(g),r.appendChild(f),d.forEach((function(e){var n;e.addEventListener("mousedown",(function(a){a.target.style.transform="translateY(1px)",a.preventDefault(),e==r?(c(t,"up"),n=setInterval(c,200,t,"up")):(c(t,"down"),n=setInterval(c,200,t,"down"))})),e.addEventListener("keypress",(function(n){n.target.style.transform="translateY(1px)","Enter"==n.key&&(n.preventDefault(),c(t,e==r?"up":"down"))})),e===r&&e.addEventListener("keydown",(function(e){"Tab"===e.key&&e.shiftKey&&(t.focus(),t.select(),s(t,1),e.preventDefault())})),e.addEventListener("keyup",(function(e){if("Enter"==e.key){var r=l(t);s(t,r)}})),e.addEventListener("mouseup",(function(e){e.target.style.transform="translateY(0)";var r=l(t);s(t,r),clearInterval(n)})),e.addEventListener("mouseleave",(function(e){if(e.target.style.transform="translateY(0)",n){clearInterval(n);var r=l(t);s(t,r)}}))}));var h=document.createElement("div");h.setAttribute("class","controls"),h.appendChild(r),h.appendChild(o);var v=document.createElement("div");v.setAttribute("class","html-duration-picker-input-controls-wrapper"),t.parentNode.insertBefore(v,t),v.appendChild(t),v.appendChild(h)}})),!0};return window.addEventListener("DOMContentLoaded",(function(){return S(!0)})),{init:function(){return S(!0)},refresh:function(){return S(!1)}}}();return e=e.default})()));